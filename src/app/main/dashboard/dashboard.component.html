<section>
  <div class="common-page-heding-font">
    <h1 class="heading">
      {{ header }}
    </h1>
    <p class="sub-heading">
      {{ subHeading }}
    </p>
  </div>

  <!-- user panel  -->
  <!-- user cards  -->

  <section class="dashboard-card" *ngIf="!isAdmin">
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-calendar h-8 w-8 text-blue-600 primary-color"
        >
          <path d="M8 2v4"></path>
          <path d="M16 2v4"></path>
          <rect width="18" height="18" x="3" y="4" rx="2"></rect>
          <path d="M3 10h18"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Today's Date</p>
        <p class="small-card-sub-heading">{{ userRole.curentDate }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-check-circle h-8 w-8 text-gray-400 success-color"
        >
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <path d="m9 11 3 3L22 4"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Tasks Planned</p>
        <p class="small-card-sub-heading">{{ taskPlanned }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-file-text h-8 w-8 text-emerald-600 success-color"
        >
          <path
            d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"
          ></path>
          <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
          <path d="M10 9H8"></path>
          <path d="M16 13H8"></path>
          <path d="M16 17H8"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">EOD Report</p>
        <p class="small-card-sub-heading">{{ eodReport }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-trending-up h-8 w-8 text-indigo-600 purple-color"
        >
          <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline>
          <polyline points="16 7 22 7 22 13"></polyline>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Weekly Reports</p>
        <p class="small-card-sub-heading">{{ weeklyReport }}</p>
      </div>
    </div>
  </section>

  <!-- user summry cards  -->
  <section class="summary-section common-container" *ngIf="!isAdmin">
    <div class="common-big-card">
      <h4 class="card-heading">Today's Action items</h4>
      <div class="common-alert-container">
        <div
          class="common-alert user-yellow-alert"
          *ngIf="taskPlanned === 'Success' ? false : true"
        >
          <div class="alert-svg-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="20"
              color="#d69430"
              fill="none"
            >
              <path
                d="M13.9248 21H10.0752C5.44476 21 3.12955 21 2.27636 19.4939C1.42317 17.9879 2.60736 15.9914 4.97574 11.9985L6.90057 8.75333C9.17559 4.91778 10.3131 3 12 3C13.6869 3 14.8244 4.91777 17.0994 8.75332L19.0243 11.9985C21.3926 15.9914 22.5768 17.9879 21.7236 19.4939C20.8704 21 18.5552 21 13.9248 21Z"
                stroke="#d69430"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M12 9V13.5"
                stroke="#d69430"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
              <path
                d="M12 16.9922V17.0022"
                stroke="#d69430"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
          </div>
          <div class="common-alert-details">
            <p class="common-alert-heading alert-heading-color">
              Plane your tasks for today
            </p>
            <p class="common-alert-sub-heading alert-sub-text-color">
              Add your planned tasks to get started
            </p>
          </div>
        </div>
        <div
          class="common-alert user-success-alert"
          *ngIf="
            taskPlanned === 'Success' && eodReport === 'Success' ? true : false
          "
        >
          <div class="alert-svg-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="20"
              color="#139d71"
              fill="none"
            >
              <path
                d="M15 2.4578C14.053 2.16035 13.0452 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 10.9548 21.8396 9.94704 21.5422 9"
                stroke="#139d71"
                stroke-width="1.5"
                stroke-linecap="round"
              ></path>
              <path
                d="M8.5 9.5L12 13L21.0002 3"
                stroke="#139d71"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
          </div>
          <div class="common-alert-details">
            <p class="common-alert-heading">All tasks completed!</p>
            <p class="common-alert-sub-heading">
              Great job! You've completed all required submissions for today.
            </p>
          </div>
        </div>
        <div
          class="common-alert user-primary-alert"
          *ngIf="eodReport === 'Success' ? false : true"
        >
          <div class="alert-svg-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="20"
              color="#467aee"
              fill="none"
            >
              <circle
                cx="12"
                cy="12"
                r="10"
                stroke="#467aee"
                stroke-width="1.5"
              ></circle>
              <path
                d="M12 8V12L14 14"
                stroke="#467aee"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </svg>
          </div>
          <div class="common-alert-details">
            <p class="common-alert-heading">Submit end-of-day report</p>
            <p class="common-alert-sub-heading">
              Report your completed tasks and progress
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="common-big-card">
      <h4 class="card-heading">Weekly Summary</h4>
      <div class="weekly-summary-report">
        <div class="weekly-report-details">
          <p class="weekly-report-heading">Reports Submitted</p>
          <span class="weekly-report-sub-heading">{{ weeklyReport }}/7</span>
        </div>
        <div class="weekly-report-details">
          <p class="weekly-report-heading">Completion Rate</p>
          <span class="weekly-report-sub-heading"
            >{{ ((weeklyReport / 7) * 100 | number : "1.0-0") || 0 }}%</span
          >
        </div>
        <div class="weekly-report-details">
          <p class="weekly-report-heading">Avg. Working Hours</p>
          <span class="weekly-report-sub-heading">{{ avgWorkingHoures }}h</span>
        </div>

        <div class="weekly-proress">
          <div class="progress-percentage marging-bottom">
            <span>Progress</span>
            <p>{{ (weeklyReport / 7) * 100 | number : "1.0-0" }}%</p>
          </div>
          <div class="common-progress-bar">
            <div
              class="common-progress-bar-width"
              [ngStyle]="{
                width: (weeklyReport / 7) * 100 + '%',
                backgroundColor: (weeklyReport / 7) * 100 < 75 ? 'red' : 'green'
              }"
            ></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- admin cars  -->
  <section class="dashboard-card" *ngIf="isAdmin">
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-users h-8 w-8 text-blue-600 primary-color"
        >
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Total Employees</p>
        <p class="small-card-sub-admin-heading">{{ totalEmployees }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg 
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-check-circle h-8 w-8 text-emerald-600 success-color"
        >
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <path d="m9 11 3 3L22 4"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Today's Submissions</p>
        <p class="small-card-sub-admin-heading">{{ todaySubmissions }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-alert-triangle h-8 w-8 text-yellow-600 yellow-color"
        >
          <path
            d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"
          ></path>
          <path d="M12 9v4"></path>
          <path d="M12 17h.01"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Pending Reports</p>
        <p class="small-card-sub-admin-heading">{{ pendingReports }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-target h-8 w-8 text-indigo-600 purple-color"
        >
          <circle cx="12" cy="12" r="10"></circle>
          <circle cx="12" cy="12" r="6"></circle>
          <circle cx="12" cy="12" r="2"></circle>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Compliance Rate</p>
        <p class="small-card-sub-admin-heading">
          {{ (todaySubmissions / totalEmployees) * 100 || 0 |number:'1.0-0'}}%
        </p>
      </div>
    </div>
  </section>

  <!-- admin weekly compliance  -->

  <section class="summary-section common-container" *ngIf="isAdmin">
    <div class="common-big-card">
      <h4 class="card-heading">Weekly Compliance Trend</h4>
      <div class="weekly-summary-report">
        <ng-container
          *ngFor="let report of complianceRateReport; let i = index"
        >
          <div class="admin-compliance-report">
            <div class="weekly-report-details-admin">
              <p class="weekly-report-heading">
                {{ report.day || daysName[i] }}
              </p>
              <span class="weekly-report-sub-heading"
                >{{ report.total  || 0 }}/{{ totalEmployees }}</span
              >
            </div>
            <div class="admin-progess-report">
              <div class="common-progress-bar">
                <div
                  class="common-progress-bar-width"
                  [ngStyle]="{
                    width: ((report.total / totalEmployees) * 100 || 0) + '%',
                    backgroundColor:
                      (report.total / totalEmployees) * 100 > 70
                        ? 'green'
                        : 'red'
                  }"
                ></div>
              </div>
              <span
                >{{
                  ((report.total / totalEmployees) * 100 | number : "1.0-0") ||
                    0
                }}%</span
              >
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="common-big-card">
      <h4 class="card-heading">Today's Activity</h4>
      <div class="deshboard-alerts">
        <div class="common-alert-container">
          <div class="common-admin-alert user-primary-alert alert-border-none">
            <div class="admin-card">
              <div class="alert-svg-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-calendar h-5 w-5 text-blue-600 mr-3"
                >
                  <path d="M8 2v4"></path>
                  <path d="M16 2v4"></path>
                  <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                  <path d="M3 10h18"></path>
                </svg>
              </div>
              <div class="common-alert-details">
                <p class="common-alert-heading">Tasks Planned</p>
                <p class="common-alert-sub-heading">
                  {{ tasksPlanned }} employees
                </p>
              </div>
            </div>
            <p class="admin-sub-details">{{ tasksPlanned }}</p>
          </div>

          <div class="common-admin-alert user-success-alert alert-border-none">
            <div class="admin-card">
              <div class="alert-svg-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-file-text h-5 w-5 text-emerald-600 mr-3"
                >
                  <path
                    d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"
                  ></path>
                  <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
                  <path d="M10 9H8"></path>
                  <path d="M16 13H8"></path>
                  <path d="M16 17H8"></path>
                </svg>
              </div>
              <div class="common-alert-details">
                <p class="common-alert-heading">Reports Submitted</p>
                <p class="common-alert-sub-heading">
                  {{ reportsSubmitted }} employees
                </p>
              </div>
            </div>
            <p class="admin-sub-details">
              {{ reportsSubmitted }}
            </p>
          </div>
          <div class="common-admin-alert user-yellow-alert alert-border-none">
            <div class="admin-card">
              <div class="alert-svg-icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-clock h-5 w-5 text-yellow-600 mr-3"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
              </div>
              <div class="common-alert-details">
                <p class="common-alert-heading alert-heading-color">
                  Pending Reports
                </p>
                <p class="common-alert-sub-heading alert-sub-text-color">
                  Need attention
                </p>
              </div>
            </div>
            <p class="admin-sub-details">{{ pendingReports }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- common card  -->
  <section class="common-big-card common-container">
    <h4 class="card-heading">Recent Activity</h4>
    <div class="recent-activity">
      <ng-container *ngFor="let activity of resentActivity">
        <div class="recent-activity-details">
          <div class="recent-activity-icon">
            <div class="recent-activity-svg">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-file-text h-5 w-5 text-gray-400 mr-3"
              >
                <path
                  d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"
                ></path>
                <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
                <path d="M10 9H8"></path>
                <path d="M16 13H8"></path>
                <path d="M16 17H8"></path>
              </svg>
            </div>
            <div class="recent-activity-user-detail">
              <p class="recent-activity-name">{{ activity.type }}</p>
              <p class="end-of-day-report-user">
                {{ activity.date }}
              </p>
            </div>
          </div>
          <div class="recent-activity-time">
            <p class="time">{{ activity.workingHours }}h Worked</p>
            <p>{{activity.editCount}} tasks completed</p>
          </div>
        </div>
      </ng-container>

      <div class="no-activity-found" *ngIf="resentActivity.length < 1">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="#d1d5db"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-file-text h-12 w-12 mx-auto mb-3 text-gray-300"
        >
          <path
            d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"
          ></path>
          <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
          <path d="M10 9H8"></path>
          <path d="M16 13H8"></path>
          <path d="M16 17H8"></path>
        </svg>
        <p>No reports submitted this week</p>
      </div>
    </div>
  </section>
</section>
