<section>
  <div class="common-page-heding-font">
    <h1 class="heading">Compliance Report</h1>
    <p class="sub-heading">Monitor employee report submission compliance</p>
  </div>
  <div class="compliance-report-date-select">
    <div class="input-fileds">
      <label for="selectDate" class="select-date">
        Select Date
        <input
          type="date"
          [value]="curentDate"
          id="selectDate"
          #date
          name="date"
          (change)="getReports()"
          [max]="curentDate"
        />
      </label>
      <label for="checkBox">
        <input
          type="checkbox"
          #checkMissingReports
          name="checkBox"
          id="checkBox"
          (change)="getReports()"
        />
        Show only missing reports
      </label>
    </div>
    <button (click)="downloadCsvFile()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        width="20"
        color="#68707c"
        fill="none"
      >
        <path
          d="M12 14.5L12 4.5M12 14.5C11.2998 14.5 9.99153 12.5057 9.5 12M12 14.5C12.7002 14.5 14.0085 12.5057 14.5 12"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <path
          d="M20 16.5C20 18.982 19.482 19.5 17 19.5H7C4.518 19.5 4 18.982 4 16.5"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
      Export CSV
    </button>
  </div>
  <section class="dashboard-card">
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-users h-8 w-8 text-blue-600 primary-color"
        >
          <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Total Employees</p>
        <p class="small-card-sub-admin-heading">{{ totalEmployee }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-file-text h-8 w-8 text-emerald-600 success-color"
        >
          <path
            d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"
          ></path>
          <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
          <path d="M10 9H8"></path>
          <path d="M16 13H8"></path>
          <path d="M16 17H8"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Reports Submitted</p>
        <p class="small-card-sub-admin-heading">{{ submitReports }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-alert-triangle h-8 w-8 text-red-600 red-color"
        >
          <path
            d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"
          ></path>
          <path d="M12 9v4"></path>
          <path d="M12 17h.01"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Missing Reports</p>
        <p class="small-card-sub-admin-heading">{{ missingReports }}</p>
      </div>
    </div>
    <div class="common-small-card">
      <div class="small-card-svg-icon">
        <svg
          [ngClass]=""
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-calendar h-8 w-8 text-indigo-600 purple-color"
        >
          <path d="M8 2v4"></path>
          <path d="M16 2v4"></path>
          <rect width="18" height="18" x="3" y="4" rx="2"></rect>
          <path d="M3 10h18"></path>
        </svg>
      </div>
      <div class="small-card-details">
        <p class="small-card-heading">Compliance Rate</p>
        <p class="small-card-sub-admin-heading">
          {{ (missingReports / totalEmployee) * 100 || 0 | number : "1.0-0" }}%
        </p>
      </div>
    </div>
  </section>

  <section>
    <div class="user-table-responsive">
      <div class="caption-top-between">
        <div class="caption-svg">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            width="25"
            color="#111827"
            fill="none"
          >
            <path
              d="M8.85746 12.5061C6.36901 10.6456 4.59564 8.59915 3.62734 7.44867C3.3276 7.09253 3.22938 6.8319 3.17033 6.3728C2.96811 4.8008 2.86701 4.0148 3.32795 3.5074C3.7889 3 4.60404 3 6.23433 3H17.7657C19.396 3 20.2111 3 20.672 3.5074C21.133 4.0148 21.0319 4.8008 20.8297 6.37281C20.7706 6.83191 20.6724 7.09254 20.3726 7.44867C19.403 8.60062 17.6261 10.6507 15.1326 12.5135C14.907 12.6821 14.7583 12.9567 14.7307 13.2614C14.4837 15.992 14.2559 17.4876 14.1141 18.2442C13.8853 19.4657 12.1532 20.2006 11.226 20.8563C10.6741 21.2466 10.0043 20.782 9.93278 20.1778C9.79643 19.0261 9.53961 16.6864 9.25927 13.2614C9.23409 12.9539 9.08486 12.6761 8.85746 12.5061Z"
              stroke="#111827"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </svg>
          <h6>Compliance Reports for {{ date.value }}</h6>
        </div>
        <p>Showing 2 of 2 employees</p>
      </div>
      <table class="users-detail-table">
        <thead>
          <tr>
            <th>EMPLOYEE</th>
            <th>DEPARTMENT</th>
            <th>STATUS</th>
            <th>WORKING HOURS</th>
            <th>TASKS COMPLETED</th>
            <th>SUBMISSION TIME</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let report of displayReports; let last = last"
            [ngClass]="last ? 'border-bottom' : ''"
          >
            <td class="employee-name">
              <p class="name">{{ report.name }}</p>
              <span class="email">{{ report.email }}</span>
            </td>
            <td>{{ report.department }}</td>
            <td>
              <span
                [ngClass]="
                  report.status === 'Submitted'
                    ? 'submit-reports'
                    : 'missing-reports'
                "
                >{{ report.status }}</span
              >
            </td>
            <td>{{ report.workingHours }}</td>
            <td>{{ report.tasksCompleted }}</td>
            <td class="submission-time">{{ report.submissionTime }}</td>
          </tr>
          <tr *ngIf="displayReports.length < 1" class="border-bottom">
            <td colspan="6">
              <p class="no-data-found">No Data Found</p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</section>
